<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专业MBTI人格测试 - 48题完整版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .quiz-header p {
            color: #666;
            font-size: 1.1em;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .question-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .question-number {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
            display: inline-block;
        }

        .question-text {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .option-letter {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 30px;
            height: 30px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #666;
        }

        .option.selected .option-letter {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .option-text {
            margin-left: 40px;
            color: #333;
            line-height: 1.5;
        }

        /* 6点量表样式 */
        .likert-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .likert-option {
            flex: 1;
            min-width: 80px;
            text-align: center;
            padding: 15px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
        }

        .likert-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .likert-option.selected {
            border-color: #667eea;
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .likert-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .likert-text {
            font-size: 0.9em;
            color: #666;
            line-height: 1.3;
        }

        .likert-option.selected .likert-value {
            color: #667eea;
        }

        .likert-option.selected .likert-text {
            color: #333;
            font-weight: 600;
        }

    
        /* 改进的问题样式 */
        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-text {
            flex: 1;
            font-size: 1.3em;
            color: #333;
            line-height: 1.6;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .result-container {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .result-type {
            font-size: 4em;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .result-description {
            font-size: 1.2em;
            color: #666;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .result-details {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            text-align: left;
        }

        .result-details h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .result-details p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .dimension-bars {
            display: grid;
            gap: 20px;
            margin: 30px 0;
        }

        .dimension {
            text-align: left;
        }

        .dimension-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .dimension-bar {
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .dimension-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }

        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f0f0f0;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 1024px) {
            .quiz-container {
                padding: 30px;
                max-width: 95%;
            }

            .quiz-header h1 {
                font-size: 2.2em;
            }

            .progress-bar {
                height: 8px;
            }

            .question-text {
                font-size: 1.2em;
            }

            .options {
                gap: 15px;
            }

            .option {
                padding: 18px;
            }

            .option-text {
                font-size: 1em;
            }
        }

        @media (max-width: 768px) {
            .quiz-container {
                padding: 20px;
                margin: 10px;
            }

            .quiz-header {
                margin-bottom: 30px;
            }

            .quiz-header h1 {
                font-size: 2em;
                margin-bottom: 15px;
            }

            .progress-info {
                font-size: 0.9rem;
                margin-bottom: 10px;
            }

            .progress-bar {
                height: 6px;
            }

            .question-text {
                font-size: 1.1em;
                margin-bottom: 25px;
                line-height: 1.4;
            }

            .options {
                gap: 12px;
            }

            .option {
                padding: 15px;
                border-radius: 12px;
                transition: all 0.2s ease;
            }

            .option:hover {
                transform: translateY(-2px);
            }

            .option-text {
                font-size: 0.95em;
                line-height: 1.4;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
                margin-top: 30px;
            }

            .btn {
                width: 100%;
                padding: 15px;
                font-size: 1em;
            }

            .btn:disabled {
                opacity: 0.6;
                cursor: not-allowed;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .quiz-container {
                padding: 15px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            }

            .quiz-header h1 {
                font-size: 1.8em;
            }

            .progress-info {
                font-size: 0.85rem;
            }

            .question-text {
                font-size: 1em;
                margin-bottom: 20px;
            }

            /* 6点量表移动端优化 */
            .likert-scale {
                gap: 8px;
            }

            .likert-option {
                min-width: 70px;
                padding: 12px 8px;
            }

            .likert-value {
                font-size: 1em;
            }

            .likert-text {
                font-size: 0.8em;
            }

            .options {
                gap: 10px;
            }

            .option {
                padding: 12px;
                border-radius: 10px;
            }

            .option-text {
                font-size: 0.9em;
            }

            .navigation {
                margin-top: 25px;
                gap: 12px;
            }

            .btn {
                padding: 12px;
                font-size: 0.9rem;
            }

            .result-container {
                padding: 20px;
            }

            .result-type {
                font-size: 2.5em;
            }

            .result-name {
                font-size: 1.5em;
            }

            .result-description {
                font-size: 0.95em;
            }

            .restart-btn {
                padding: 12px 25px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>专业MBTI人格测试</h1>
            <p>基于荣格心理类型理论的专业测试，使用6点量表确保准确性</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div id="quizContent">
            <!-- 问题将在这里动态生成 -->
        </div>

        <div id="instructions" style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 30px; text-align: left;">
            <h3 style="color: #333; margin-bottom: 15px;">测试说明</h3>
            <p style="color: #666; line-height: 1.6; margin-bottom: 10px;">
                <strong>测试方法：</strong>请根据题目描述，选择最符合您情况的程度。
            </p>
            <p style="color: #666; line-height: 1.6; margin-bottom: 10px;">
                <strong>评分标准：</strong>
            </p>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
                <div style="text-align: center; padding: 8px; background: white; border-radius: 8px;">
                    <strong>1分</strong><br>完全不符合
                </div>
                <div style="text-align: center; padding: 8px; background: white; border-radius: 8px;">
                    <strong>2分</strong><br>不太符合
                </div>
                <div style="text-align: center; padding: 8px; background: white; border-radius: 8px;">
                    <strong>3分</strong><br>有点不符合
                </div>
                <div style="text-align: center; padding: 8px; background: white; border-radius: 8px;">
                    <strong>4分</strong><br>有点符合
                </div>
                <div style="text-align: center; padding: 8px; background: white; border-radius: 8px;">
                    <strong>5分</strong><br>比较符合
                </div>
                <div style="text-align: center; padding: 8px; background: white; border-radius: 8px;">
                    <strong>6分</strong><br>完全符合
                </div>
            </div>
            <p style="color: #666; line-height: 1.6; margin-bottom: 10px;">
                <strong>注意事项：</strong>请根据您的真实感受回答，不要过度思考。测试包含48道题目，预计需要8-10分钟完成。
            </p>
            <button class="btn btn-primary" onclick="startQuiz()" style="margin-top: 15px;">开始测试</button>
        </div>

        <div class="progress-info" id="progressInfo" style="display: none; text-align: center; margin-top: 20px; color: #666;">
            <span id="questionCounter">1 / 48</span>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>正在分析您的人格类型...</p>
        </div>

        <div class="result-container" id="resultContainer">
            <div class="result-type" id="resultType"></div>
            <div class="result-description" id="resultDescription"></div>

            <div class="dimension-bars">
                <div class="dimension">
                    <div class="dimension-label">
                        <span>外向 (E)</span>
                        <span>内向 (I)</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill" id="eiBar"></div>
                    </div>
                </div>

                <div class="dimension">
                    <div class="dimension-label">
                        <span>感觉 (S)</span>
                        <span>直觉 (N)</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill" id="snBar"></div>
                    </div>
                </div>

                <div class="dimension">
                    <div class="dimension-label">
                        <span>思考 (T)</span>
                        <span>情感 (F)</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill" id="tfBar"></div>
                    </div>
                </div>

                <div class="dimension">
                    <div class="dimension-label">
                        <span>判断 (J)</span>
                        <span>感知 (P)</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill" id="jpBar"></div>
                    </div>
                </div>
            </div>

            <div class="result-details" id="resultDetails">
                <!-- 详细结果将在这里显示 -->
            </div>

            <div style="margin-top: 30px;">
                <button class="btn btn-primary" onclick="restartQuiz()">重新测试</button>
                <button class="btn btn-secondary" onclick="shareResult()">分享结果</button>
            </div>
        </div>
    </div>

    <script>
        // 专业的MBTI测试题目库 - 使用6点量表
        const questions = [
            // E/I 维度题目 (12题)
            {
                question: "我喜欢参加聚会和社交活动",
                dimension: "E",
                type: "positive"
            },
            {
                question: "我觉得独处比参加聚会更让我感到放松",
                dimension: "I",
                type: "positive"
            },
            {
                question: "我倾向于在讨论中主动表达自己的观点",
                dimension: "E",
                type: "positive"
            },
            {
                question: "我更喜欢在安静的环境中思考和工作",
                dimension: "I",
                type: "positive"
            },
            {
                question: "我不喜欢成为众人关注的焦点",
                dimension: "I",
                type: "positive"
            },
            {
                question: "我能够轻松与陌生人开始对话",
                dimension: "E",
                type: "positive"
            },
            {
                question: "我觉得长时间的社交活动让我感到疲惫",
                dimension: "I",
                type: "positive"
            },
            {
                question: "我喜欢在团队中工作而不是独自完成任务",
                dimension: "E",
                type: "positive"
            },
            {
                question: "我不喜欢在没有准备的情况下被突然要求发言",
                dimension: "I",
                type: "positive"
            },
            {
                question: "我在人群中感到充满活力和兴奋",
                dimension: "E",
                type: "positive"
            },
            {
                question: "我需要独处时间来恢复精力",
                dimension: "I",
                type: "positive"
            },
            {
                question: "我更喜欢通过电话或面对面交流而不是通过文字",
                dimension: "E",
                type: "positive"
            },

            // S/N 维度题目 (12题)
            {
                question: "我更关注具体的现实而不是抽象的可能性",
                dimension: "S",
                type: "positive"
            },
            {
                question: "我喜欢探索新的想法和创新的可能性",
                dimension: "N",
                type: "positive"
            },
            {
                question: "我更信任过去的经验和已知的事实",
                dimension: "S",
                type: "positive"
            },
            {
                question: "我经常思考未来的可能性而不是当前的细节",
                dimension: "N",
                type: "positive"
            },
            {
                question: "我不喜欢过于理论化的讨论",
                dimension: "S",
                type: "positive"
            },
            {
                question: "我喜欢发现事物之间的联系和模式",
                dimension: "N",
                type: "positive"
            },
            {
                question: "我更注重实用性而不是创新性",
                dimension: "S",
                type: "positive"
            },
            {
                question: "我经常有灵感突然涌现的体验",
                dimension: "N",
                type: "positive"
            },
            {
                question: "我喜欢按照明确的步骤做事",
                dimension: "S",
                type: "positive"
            },
            {
                question: "我不喜欢过于注重细节的工作",
                dimension: "N",
                type: "positive"
            },
            {
                question: "我更关注现在而不是未来",
                dimension: "S",
                type: "positive"
            },
            {
                question: "我喜欢想象不同的情景和可能性",
                dimension: "N",
                type: "positive"
            },

            // T/F 维度题目 (12题)
            {
                question: "在做决定时，我更重视逻辑分析而不是情感因素",
                dimension: "T",
                type: "positive"
            },
            {
                question: "在做决定时，我考虑他人的感受很重要",
                dimension: "F",
                type: "positive"
            },
            {
                question: "我认为客观公正比和谐更重要",
                dimension: "T",
                type: "positive"
            },
            {
                question: "我能够理解他人的情感和需求",
                dimension: "F",
                type: "positive"
            },
            {
                question: "我不喜欢在决定中过多考虑个人情感",
                dimension: "T",
                type: "positive"
            },
            {
                question: "我重视人际关系和和谐氛围",
                dimension: "F",
                type: "positive"
            },
            {
                question: "我认为批评应该是客观和建设性的",
                dimension: "T",
                type: "positive"
            },
            {
                question: "我经常为他人感到高兴或难过",
                dimension: "F",
                type: "positive"
            },
            {
                question: "我认为效率比感受更重要",
                dimension: "T",
                type: "positive"
            },
            {
                question: "我不喜欢看到他人受到伤害",
                dimension: "F",
                type: "positive"
            },
            {
                question: "我认为公平不等于每个人都得到同样的对待",
                dimension: "T",
                type: "positive"
            },
            {
                question: "我重视个人价值观在决定中的作用",
                dimension: "F",
                type: "positive"
            },

            // J/P 维度题目 (12题)
            {
                question: "我喜欢制定计划并按照计划执行",
                dimension: "J",
                type: "positive"
            },
            {
                question: "我喜欢保持选择的开放性和灵活性",
                dimension: "P",
                type: "positive"
            },
            {
                question: "我喜欢按时完成任务并提前准备",
                dimension: "J",
                type: "positive"
            },
            {
                question: "我在压力下工作得更好",
                dimension: "P",
                type: "positive"
            },
            {
                question: "我不喜欢计划被打乱",
                dimension: "J",
                type: "positive"
            },
            {
                question: "我喜欢同时处理多个任务",
                dimension: "P",
                type: "positive"
            },
            {
                question: "我认为遵守截止日期很重要",
                dimension: "J",
                type: "positive"
            },
            {
                question: "我不喜欢过于严格的时间安排",
                dimension: "P",
                type: "positive"
            },
            {
                question: "我喜欢把事情整理得井井有条",
                dimension: "J",
                type: "positive"
            },
            {
                question: "我喜欢探索不同的选择而不是立即做出决定",
                dimension: "P",
                type: "positive"
            },
            {
                question: "我认为完成已开始的任务很重要",
                dimension: "J",
                type: "positive"
            },
            {
                question: "我喜欢即兴发挥而不是严格按计划行事",
                dimension: "P",
                type: "positive"
            }
        ];

        // MBTI类型描述
        const typeDescriptions = {
            'INTJ': {
                title: '建筑师',
                description: '你是一个战略思维者，具有强烈的直觉和逻辑分析能力。你善于制定长远计划，追求完美，并且独立自主。',
                details: {
                    strengths: ['战略思维', '独立自主', '追求完美', '决策果断'],
                    challenges: ['表达情感', '适应变化', '团队合作'],
                    careers: ['战略顾问', '研发工程师', '投资分析师', '建筑师']
                }
            },
            'INTP': {
                title: '逻辑学家',
                description: '你是一个理论家，对知识和理解有着强烈的好奇心。你善于分析复杂系统，寻找逻辑一致性和创新解决方案。',
                details: {
                    strengths: ['逻辑分析', '创新思维', '客观公正', '深度思考'],
                    challenges: ['实际执行', '时间管理', '社交互动'],
                    careers: ['研究员', '程序员', '哲学家', '科学家']
                }
            },
            'ENTJ': {
                title: '指挥官',
                description: '你是一个天生的领导者，具有强烈的组织能力和战略眼光。你善于激励他人，追求效率和成果。',
                details: {
                    strengths: ['领导能力', '战略规划', '决策果断', '目标导向'],
                    challenges: ['缺乏耐心', '忽视细节', '情感敏感度'],
                    careers: ['CEO', '管理顾问', '项目经理', '企业家']
                }
            },
            'ENTP': {
                title: '辩论家',
                description: '你是一个创新思维的倡导者，喜欢探索新想法和可能性。你善于辩论，具有很强的适应能力。',
                details: {
                    strengths: ['创新思维', '辩论能力', '适应性强', '快速学习'],
                    challenges: ['缺乏专注力', '细节执行', '长期承诺'],
                    careers: ['创业家', '咨询顾问', '记者', '律师']
                }
            },
            'INFJ': {
                title: '提倡者',
                description: '你是一个理想主义者，具有深刻的洞察力和同理心。你致力于帮助他人实现潜能，追求有意义的生活。',
                details: {
                    strengths: ['深度理解', '同理心', '价值观驱动', '创造力'],
                    challenges: ['设定边界', '自我批评', '应对冲突'],
                    careers: ['心理咨询师', '作家', '人力资源', '教师']
                }
            },
            'INFP': {
                title: '调停者',
                description: '你是一个理想主义的和平主义者，具有强烈的价值观和创造力。你致力于追求和谐与真实。',
                details: {
                    strengths: ['创造力', '同理心', '忠诚度', '价值观坚定'],
                    challenges: ['决策困难', '实际操作', '冲突处理'],
                    careers: ['艺术家', '心理咨询师', '教师', '作家']
                }
            },
            'ENFJ': {
                title: '主人公',
                description: '你是一个富有魅力的领导者，具有强烈的同理心和激励他人的能力。你致力于帮助他人成长和发展。',
                details: {
                    strengths: ['人际魅力', '同理心', '激励能力', '团队建设'],
                    challenges: ['忽视自我需求', '过度承诺', '批评敏感'],
                    careers: ['教师', '培训师', '销售经理', '人力资源']
                }
            },
            'ENFP': {
                title: '竞选者',
                description: '你是一个热情洋溢的自由精神，具有强烈的好奇心和人际连接能力。你善于激励他人，探索新可能性。',
                details: {
                    strengths: ['热情', '创意思维', '人际连接', '适应性强'],
                    challenges: ['缺乏专注力', '组织能力', '情绪管理'],
                    careers: ['市场营销', '公关', '心理咨询', '创业者']
                }
            },
            'ISTJ': {
                title: '物流师',
                description: '你是一个可靠和负责任的实用主义者，具有强烈的组织能力和责任感。你重视传统和稳定性。',
                details: {
                    strengths: ['组织能力', '执行力', '忠诚度', '责任感'],
                    challenges: ['适应变化', '创新思维', '表达情感'],
                    careers: ['会计师', '律师', '工程师', '管理者']
                }
            },
            'ISFJ': {
                title: '守护者',
                description: '你是一个温暖和支持型的守护者，具有强烈的责任感和同理心。你致力于保护和支持你所关心的人。',
                details: {
                    strengths: ['支持他人', '细致入微', '责任感', '忠诚度'],
                    challenges: ['自我主张', '应对变化', '冲突处理'],
                    careers: ['护士', '教师', '社会工作者', '人力资源']
                }
            },
            'ESTJ': {
                title: '总经理',
                description: '你是一个高效的组织者，具有强烈的领导能力和实用主义精神。你重视秩序、传统和效率。',
                details: {
                    strengths: ['领导能力', '组织管理', '决策果断', '执行力'],
                    challenges: ['缺乏灵活性', '情感敏感度', '创新思维'],
                    careers: ['管理者', '军官', '企业家', '会计师']
                }
            },
            'ESFJ': {
                title: '执政官',
                description: '你是一个和谐导向的支持者，具有强烈的同理心和责任感。你致力于维护人际关系和社会和谐。',
                details: {
                    strengths: ['人际关系', '组织协调', '支持他人', '责任感'],
                    challenges: ['冲突处理', '批评接受', '自我关怀'],
                    careers: ['护士', '教师', '人力资源', '销售']
                }
            },
            'ISTP': {
                title: '鉴赏家',
                description: '你是一个独立和实用的解决问题者，具有强烈的技能导向和实践能力。你享受动手操作和解决实际问题。',
                details: {
                    strengths: ['问题解决', '实用技能', '独立性', '适应性强'],
                    challenges: ['长期承诺', '情感表达', '理论思维'],
                    careers: ['工程师', '技术员', '运动员', '手工艺人']
                }
            },
            'ISFP': {
                title: '探险家',
                description: '你是一个敏感和艺术性的自由精神，具有强烈的审美感和同理心。你追求美丽和真实。',
                details: {
                    strengths: ['创造力', '美学感', '同理心', '独立性'],
                    challenges: ['决策困难', '组织能力', '时间管理'],
                    careers: ['艺术家', '设计师', '心理咨询师', '摄影师']
                }
            },
            'ESTP': {
                title: '企业家',
                description: '你是一个充满活力的行动派，具有强烈的实用主义精神和冒险精神。你享受挑战和解决问题。',
                details: {
                    strengths: ['适应性强', '解决问题', '社交能力', '行动导向'],
                    challenges: ['长期规划', '细节关注', '理论思维'],
                    careers: ['销售', '企业家', '运动员', '咨询师']
                }
            },
            'ESFP': {
                title: '表演者',
                description: '你是一个热情和社交的娱乐者，具有强烈的人际魅力和乐观精神。你享受与他人互动和创造快乐。',
                details: {
                    strengths: ['人际魅力', '适应性强', '团队精神', '乐观'],
                    challenges: ['长期规划', '组织能力', '反思时间'],
                    careers: ['演员', '销售', '活动策划', '教师']
                }
            }
        };

        // 全局变量
        let currentQuestion = 0;
        let answers = [];
        let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

        // 6点量表选项
        const likertOptions = [
            { value: 1, text: "完全不符合" },
            { value: 2, text: "不太符合" },
            { value: 3, text: "有点不符合" },
            { value: 4, text: "有点符合" },
            { value: 5, text: "比较符合" },
            { value: 6, text: "完全符合" }
        ];

        // 开始测试
        function startQuiz() {
            // 隐藏说明，显示测试内容
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('progressInfo').style.display = 'block';
            document.getElementById('quizContent').style.display = 'block';

            // 初始化测试
            initQuiz();
        }

        // 初始化测试
        function initQuiz() {
            currentQuestion = 0;
            answers = [];
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            showQuestion(0);
        }

        // 显示问题
        function showQuestion(index) {
            const question = questions[index];
            const questionHtml = `
                <div class="question-card active">
                    <div class="question-header">
                        <div class="question-number">问题 ${index + 1}</div>
                    </div>
                    <div class="question-text">${question.question}</div>
                    <div class="likert-scale">
                        ${likertOptions.map((option, i) => `
                            <div class="likert-option" onclick="selectLikertOption(${i}, ${option.value})">
                                <div class="likert-value">${option.value}</div>
                                <div class="likert-text">${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('quizContent').innerHTML = questionHtml;
            updateProgress();
            updateNavigation();

            // 恢复之前的选择
            if (answers[currentQuestion]) {
                const prevValue = answers[currentQuestion].value;
                const optionIndex = prevValue - 1;
                document.querySelectorAll('.likert-option')[optionIndex].classList.add('selected');
            }
        }

        // 选择6点量表选项
        function selectLikertOption(optionIndex, value) {
            // 移除之前的选择
            document.querySelectorAll('.likert-option').forEach(opt => {
                opt.classList.remove('selected');
            });

            // 添加新的选择
            document.querySelectorAll('.likert-option')[optionIndex].classList.add('selected');

            // 记录答案
            const question = questions[currentQuestion];
            answers[currentQuestion] = {
                value: value,
                dimension: question.dimension,
                type: question.type
            };

            // 添加选择动画效果
            const selectedOption = document.querySelectorAll('.likert-option')[optionIndex];
            selectedOption.style.transform = 'scale(1.05)';
            selectedOption.style.boxShadow = '0 8px 20px rgba(102, 126, 234, 0.3)';

            // 延迟后自动进入下一题
            setTimeout(() => {
                if (currentQuestion < questions.length - 1) {
                    nextQuestion();
                } else {
                    // 如果是最后一题，显示结果
                    calculateResults();
                }
            }, 300); // 300ms延迟，让用户看到选择效果
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                showResults();
            }
        }

        // 上一题
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        // 更新进度条
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('questionCounter').textContent = `${currentQuestion + 1} / ${questions.length}`;
        }

        // 更新进度信息
        function updateNavigation() {
            // 自动进入下一题模式下不需要手动导航控制
            // 只更新进度显示
        }

        // 计算结果
        function calculateResults() {
            // 重置分数
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

            // 计算每个维度的分数
            answers.forEach(answer => {
                if (!answer || !answer.value) return;

                const value = answer.value;
                const dimension = answer.dimension;
                const type = answer.type;

                // 对于正向题目，直接计分
                // 对于反向题目，将分数反转 (7 - value)
                let score = type === 'positive' ? value : (7 - value);

                scores[dimension] += score;
            });

            // 确定每个维度的倾向
            const ei = scores.E >= scores.I ? 'E' : 'I';
            const sn = scores.S >= scores.N ? 'S' : 'N';
            const tf = scores.T >= scores.F ? 'T' : 'F';
            const jp = scores.J >= scores.P ? 'J' : 'P';

            return ei + sn + tf + jp;
        }

        // 显示结果
        function showResults() {
            // 显示加载动画
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('loading').style.display = 'block';

            // 模拟分析过程
            setTimeout(() => {
                const resultType = calculateResults();
                const typeInfo = typeDescriptions[resultType];

                // 隐藏加载，显示结果
                document.getElementById('loading').style.display = 'none';
                document.getElementById('resultContainer').style.display = 'block';

                // 显示结果
                document.getElementById('resultType').textContent = resultType;
                document.getElementById('resultDescription').textContent = typeInfo.description;

                // 显示维度条
                updateDimensionBars();

                // 显示详细信息
                const detailsHtml = `
                    <h3>人格特征</h3>
                    <p><strong>类型名称：</strong>${typeInfo.title}</p>
                    <p><strong>核心特征：</strong>${typeInfo.description}</p>

                    <h3>优势与挑战</h3>
                    <p><strong>优势：</strong>${typeInfo.details.strengths.join('、')}</p>
                    <p><strong>挑战：</strong>${typeInfo.details.challenges.join('、')}</p>

                    <h3>适合职业</h3>
                    <p>${typeInfo.details.careers.join('、')}</p>
                `;
                document.getElementById('resultDetails').innerHTML = detailsHtml;

                // 隐藏导航
                document.getElementById('navigation').style.display = 'none';
            }, 2000);
        }

        // 更新维度条
        function updateDimensionBars() {
            const eiPercent = (scores.E / (scores.E + scores.I)) * 100;
            const snPercent = (scores.S / (scores.S + scores.N)) * 100;
            const tfPercent = (scores.T / (scores.T + scores.F)) * 100;
            const jpPercent = (scores.J / (scores.J + scores.P)) * 100;

            document.getElementById('eiBar').style.width = eiPercent + '%';
            document.getElementById('snBar').style.width = snPercent + '%';
            document.getElementById('tfBar').style.width = tfPercent + '%';
            document.getElementById('jpBar').style.width = jpPercent + '%';
        }

        // 重新开始
        function restartQuiz() {
            // 隐藏结果，显示说明
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('progressInfo').style.display = 'none';
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('instructions').style.display = 'block';
        }

        // 分享结果
        function shareResult() {
            const resultType = calculateResults();
            const typeInfo = typeDescriptions[resultType];
            const shareText = `我刚刚完成了MBTI人格测试，结果是${resultType} - ${typeInfo.title}！${typeInfo.description}`;

            if (navigator.share) {
                navigator.share({
                    title: 'MBTI人格测试结果',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // 复制到剪贴板
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('结果已复制到剪贴板！');
                });
            }
        }

        // 页面加载时初始化
        window.onload = function() {
            // 显示测试说明，隐藏测试内容
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('progressInfo').style.display = 'none';
            document.getElementById('instructions').style.display = 'block';
        };
    </script>
</body>
</html>